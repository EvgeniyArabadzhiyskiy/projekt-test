{"mappings":"YAAA,IAAMA,EAAaC,SAASC,cAAc,iBACpCC,EAAUF,SAASC,cAAc,wBACjCE,EAAUH,SAASC,cAAc,wBACjCG,EAAaJ,SAASC,cAAc,2BACpCI,EAAaL,SAASC,cAAc,iBAK1C,SAASK,EAAmBC,OAAEC,EAAFD,EAAEC,SAAUC,EAAZF,EAAYE,MAAOC,EAAnBH,EAAmBG,YAAaC,EAAhCJ,EAAgCI,UAAWC,EAA3CL,EAA2CK,GACnE,MAAQ,qDAEeC,OAAXD,EAAG,UAAwBC,OAAhBL,EAAS,SAEAK,OAFOJ,EAAM,+FAIVI,OAFHJ,EAAM,uFAGDI,OADFH,EAAY,kDACAG,OAAVF,EAAU,qDAsDnD,IAAIG,EAAO,EAGX,SAASC,EAAmBH,GAC1B,OAAOI,MACJ,sCAAwCH,OAAHD,EAAG,8CAExCK,MAAK,SAAAC,UAAOA,EAAIC,UAChBF,MAAK,SAAAG,GAGJ,GAAKA,EAAKC,YAAV,CAIA,IAAMC,EA9DZ,SAAuBf,OAAEc,EAAFd,EAAEc,YAAaZ,EAAfF,EAAeE,MAAOc,EAAtBhB,EAAsBgB,OAAQC,EAA9BjB,EAA8BiB,aAAcZ,EAA5CL,EAA4CK,GAE3DD,EAAYa,EAAaC,MAAM,EAAG,GAElCC,EAAgBH,EAAOE,QAC7BC,EAAcC,OAAO,GAEjBJ,EAAOK,OAAS,GAClBF,EAAcG,KAAK,CAAEC,KAAM,WAG7B,IAAMpB,EAAcgB,EAAcK,KAChC,SAAAC,SAAU,2BAA4CnB,OAAlBmB,EAAMF,KAAK,IAAG,IAAI,YAgBxD,MATkB,CAChBlB,GAAAA,EACAJ,SANgB,kCAA6CK,OAAZQ,GAOjDX,YAAAA,EACAD,MAAAA,EACAE,UAAAA,GAsCqBsB,CAAcb,GAE3Bc,EAAS5B,EAAmBgB,GAElCvB,EAAWoC,mBAAmB,YAAaD,OAlBjD9B,EAAWgC,YAAc,EAsBzB,IAAMC,EAAe,SAAAC,GACnBtB,MACG,iGAAqGH,OAALyB,IAEhGrB,MAAK,SAAAC,UAAOA,EAAIC,UAChBF,MAAK,SAAAG,GACWA,EAAKmB,QAAQR,KAAI,SAAAS,UAAQA,EAAK5B,MAEtCmB,IAAIhB,OAIjBsB,EAAa,GAcbhC,EAAWoC,iBAAiB,UAE5B,SAA4BC,GAC1BA,EAAIC,iBACJ,IAAMC,EAAcF,EAAIG,OAAOC,SAASC,MAExChD,EAAWiD,UAAY,GAlBJC,EAmBPL,EAAYM,MAlBxBlC,MACG,4FAAwGH,OAAboC,EAAK,UAAapC,OAALsC,IAExGlC,MAAK,SAAAC,UAAOA,EAAIC,UAChBF,MAAK,SAAAG,GACWA,EAAKmB,QAAQR,KAAI,SAAAS,UAAQA,EAAK5B,MAEtCmB,IAAIhB,MARG,IAACkC,EAAME,KAsB3BhD,EAAQsC,iBAAiB,SAGzB,SAAwBW,GACtBrD,EAAWiD,UAAY,GAGvBX,EADAvB,GAAQ,GAERV,EAAWgC,YAActB,KAP3BZ,EAAQuC,iBAAiB,SAUzB,SAAwBW,GACtB,GAAa,IAATtC,EACF,OAGFf,EAAWiD,UAAY,GAEvBX,EADAvB,GAAQ,GAERV,EAAWgC,YAActB,SAMrBuC,EAAWrD,SAASC,cAAc,YAClCqD,EAActD,SAASC,cAAc,kBACrCsD,EAAgBvD,SAASC,cAAc,iBAM7C,SAASuD,EAAYd,GAkCrB,IAAuB9B,EAjCjB8B,EAAIG,OAAOY,QAAQC,QACrBL,EAASM,UAAUC,OAAO,wBAgCPhD,EA/BL8B,EAAIG,OAAOjC,KAY7B,SAAwBA,GACbI,MACJ,sCAAwCH,OAAHD,EAAG,8CAExCK,MAAK,SAAAC,UAAOA,EAAIC,UAChBF,MAAK,SAAAG,GAGJ,GAAKA,EAAKC,YAAV,CAIA,IAAMa,EAAS5B,EAAmBc,GAGlCkC,EAAYN,UAAYd,MAM5B2B,CAAejD,IAxCnBb,EAAW0C,iBAAiB,QAASe,GACrCD,EAAcd,iBAAiB,QAASe,GACxCH,EAASZ,iBAAiB,SAS1B,SAA4BC,GACtBA,EAAIG,SAAWH,EAAIoB,eACrBT,EAASM,UAAUC,OAAO","sources":["src/js/searchFilms.js"],"sourcesContent":["const galleryBox = document.querySelector('.gallery__box');\nconst btnPrev = document.querySelector('[data-action=\"prev\"]');\nconst btnNext = document.querySelector('[data-action=\"next\"]');\nconst btnCurrent = document.querySelector('[data-action=\"current\"]');\nconst searchForm = document.querySelector('.search__form');\n// const galleryCard = document.querySelector('.search__form');\n\n\n\nfunction makeMarkupFilmCard({ imageSrc, title, movieGenres, movieYear, id }) {\n    return `\n    <li  class=\"gallery__card\" >\n      <img id=${id}  src=${imageSrc} alt=${title} data-modal=\"open\">\n      <div class=\"title__wrapper\">\n          <h3 class=\"card__title\">${title}</h3>\n          <div class=\"wrapper__info\">\n              <ul class=\"card__list\">${movieGenres}</ul>\n              <p class=\"card__year\"> | ${movieYear}</p>\n          </div>  \n      </div>\n    </li>`;\n}\n\n\nfunction makeDataMovie({ poster_path, title, genres, release_date, id }) {\n  \n  const movieYear = release_date.slice(0, 4);\n\n  const filtredGanres = genres.slice();\n  filtredGanres.splice(2);\n\n  if (genres.length > 2) {\n    filtredGanres.push({ name: 'Others' });\n  }\n\n  const movieGenres = filtredGanres.map(\n    genre => `<li class=\"card__genre\">${genre.name} ${' '}</li>`\n  );\n\n  const imageSrc = `https://image.tmdb.org/t/p/w500${poster_path}`;\n\n\n\n  const dataMovie = {\n    id,\n    imageSrc,\n    movieGenres,\n    title,\n    movieYear\n\n  }\n\n  return dataMovie\n\n\n}\n\n// const data = makeMarkupFilmCard\n\n\n// ${genres.map(genre => {\n//     return `<p class=\"card__genre\">${genre.name}</p>`\n// } ).join(' ')}\n\n// function makeMarkupFilmCards(results) {\n//     return results.map(({poster_path}) => {\n//         const imageSrc = `https://image.tmdb.org/t/p/w500${poster_path}`\n//         return `<li class=\"gallery__items\"><img  src=${imageSrc} alt=\"\" width=\"200\"></li>`\n//     }).join(' ')\n\n// }\nlet page = 1;\nbtnCurrent.textContent = 1;\n\nfunction createFIlmCardById(id) {\n  return fetch(\n    `https://api.themoviedb.org/3/movie/${id}?api_key=d8b0ad5d4fb786d62f1125fa68e28b99`\n  )\n    .then(res => res.json())\n    .then(data => {\n      // console.log('data', data);\n\n      if (!data.poster_path) {\n        return;\n      }\n      \n      const markupData = makeDataMovie(data);\n\n      const markup = makeMarkupFilmCard(markupData)\n\n      galleryBox.insertAdjacentHTML('beforeend', markup);\n    });\n}\n\nconst popularFilms = page => {\n  fetch(\n    `https://api.themoviedb.org/3/trending/movie/day?api_key=d8b0ad5d4fb786d62f1125fa68e28b99&page=${page}`\n  )\n    .then(res => res.json())\n    .then(data => {\n      const filmId = data.results.map(film => film.id);\n\n      filmId.map(createFIlmCardById);\n    });\n};\n\npopularFilms(1);\n\nconst searchFilms = (text, page) => {\n  fetch(\n    `https://api.themoviedb.org/3/search/movie?api_key=d8b0ad5d4fb786d62f1125fa68e28b99&query=${text}&page=${page}`\n  )\n    .then(res => res.json())\n    .then(data => {\n      const filmId = data.results.map(film => film.id);\n\n      filmId.map(createFIlmCardById);\n    });\n};\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\n\nfunction onSearchFormSubmit(evt) {\n  evt.preventDefault();\n  const searchInput = evt.target.elements.query;\n\n  galleryBox.innerHTML = '';\n  searchFilms(searchInput.value);\n}\n\nbtnNext.addEventListener('click', onBtnNextClick);\nbtnPrev.addEventListener('click', onBtnPrevClick);\n\nfunction onBtnNextClick(params) {\n  galleryBox.innerHTML = '';\n\n  page += 1;\n  popularFilms(page);\n  btnCurrent.textContent = page;\n}\n\nfunction onBtnPrevClick(params) {\n  if (page === 1) {\n    return;\n  }\n\n  galleryBox.innerHTML = '';\n  page -= 1;\n  popularFilms(page);\n  btnCurrent.textContent = page;\n}\n\nexport default popularFilms;\n\n//  ------------Modal Window -------------------\nconst backDrop = document.querySelector('.bacdrop');\nconst modalWindow = document.querySelector('.modal__window');\nconst btnCloseModal = document.querySelector('.modal__close');\n\ngalleryBox.addEventListener('click', modalToggle);\nbtnCloseModal.addEventListener('click', modalToggle);\nbackDrop.addEventListener('click', backdropCloseModal);\n\nfunction modalToggle(evt) {\n  if (evt.target.dataset.modal) {\n    backDrop.classList.toggle('backdrop__is-hidden');\n    makeModalCard(evt.target.id);\n  }\n}\n\nfunction backdropCloseModal(evt) {\n  if (evt.target === evt.currentTarget) {\n    backDrop.classList.toggle('backdrop__is-hidden');\n  }\n}\n\n\n\nfunction superFunction2(id) {\n    return fetch(\n      `https://api.themoviedb.org/3/movie/${id}?api_key=d8b0ad5d4fb786d62f1125fa68e28b99`\n    )\n      .then(res => res.json())\n      .then(data => {\n        // console.log('data', data);\n  \n        if (!data.poster_path) {\n          return;\n        }\n  \n        const markup = makeMarkupFilmCard(data);\n        \n  \n        modalWindow.innerHTML = markup\n      });\n  }\n\nfunction makeModalCard(id) {\n  if (id) {\n    superFunction2(id)\n  }\n}\n"],"names":["$3c6caeacd6676b8e$var$galleryBox","document","querySelector","$3c6caeacd6676b8e$var$btnPrev","$3c6caeacd6676b8e$var$btnNext","$3c6caeacd6676b8e$var$btnCurrent","$3c6caeacd6676b8e$var$searchForm","$3c6caeacd6676b8e$var$makeMarkupFilmCard","param","imageSrc","title","movieGenres","movieYear","id","concat","$3c6caeacd6676b8e$var$page","$3c6caeacd6676b8e$var$createFIlmCardById","fetch","then","res","json","data","poster_path","markupData","genres","release_date","slice","filtredGanres","splice","length","push","name","map","genre","$3c6caeacd6676b8e$var$makeDataMovie","markup","insertAdjacentHTML","textContent","$3c6caeacd6676b8e$var$popularFilms","page1","results","film","addEventListener","evt","preventDefault","searchInput","target","elements","query","innerHTML","text","value","page2","params","$3c6caeacd6676b8e$var$backDrop","$3c6caeacd6676b8e$var$modalWindow","$3c6caeacd6676b8e$var$btnCloseModal","$3c6caeacd6676b8e$var$modalToggle","dataset","modal","classList","toggle","$3c6caeacd6676b8e$var$superFunction2","currentTarget"],"version":3,"file":"index.d5c5f855.js.map"}