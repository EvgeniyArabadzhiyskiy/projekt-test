const e=document.querySelector(".gallery__box"),t=document.querySelector('[data-action="prev"]'),n=document.querySelector('[data-action="next"]'),r=document.querySelector('[data-action="current"]'),a=document.querySelector(".search__form");function i({imageSrc:e,title:t,movieGenres:n,movieYear:r,id:a}){return`\n    <li  class="gallery__card" >\n      <img id=${a}  src=${e} alt=${t} data-modal="open">\n      <div class="title__wrapper">\n          <h3 class="card__title">${t}</h3>\n          <div class="wrapper__info">\n              <ul class="card__list">${n}</ul>\n              <p class="card__year"> | ${r}</p>\n          </div>  \n      </div>\n    </li>`}let d=1;function c(t){return fetch(`https://api.themoviedb.org/3/movie/${t}?api_key=d8b0ad5d4fb786d62f1125fa68e28b99`).then((e=>e.json())).then((t=>{if(!t.poster_path)return;const n=function({poster_path:e,title:t,genres:n,release_date:r,id:a}){const i=r.slice(0,4),d=n.slice();return d.splice(2),n.length>2&&d.push({name:"Others"}),{id:a,imageSrc:`https://image.tmdb.org/t/p/w500${e}`,movieGenres:d.map((e=>`<li class="card__genre">${e.name}  </li>`)),title:t,movieYear:i}}(t),r=i(n);e.insertAdjacentHTML("beforeend",r)}))}r.textContent=1;const o=e=>{fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=d8b0ad5d4fb786d62f1125fa68e28b99&page=${e}`).then((e=>e.json())).then((e=>{e.results.map((e=>e.id)).map(c)}))};o(1);a.addEventListener("submit",(function(t){t.preventDefault();const n=t.target.elements.query;e.innerHTML="",r=n.value,fetch(`https://api.themoviedb.org/3/search/movie?api_key=d8b0ad5d4fb786d62f1125fa68e28b99&query=${r}&page=${a}`).then((e=>e.json())).then((e=>{e.results.map((e=>e.id)).map(c)}));var r,a})),n.addEventListener("click",(function(t){e.innerHTML="",d+=1,o(d),r.textContent=d})),t.addEventListener("click",(function(t){if(1===d)return;e.innerHTML="",d-=1,o(d),r.textContent=d}));const s=document.querySelector(".bacdrop"),l=document.querySelector(".modal__window"),u=document.querySelector(".modal__close");function p(e){var t;e.target.dataset.modal&&(s.classList.toggle("backdrop__is-hidden"),(t=e.target.id)&&function(e){fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=d8b0ad5d4fb786d62f1125fa68e28b99`).then((e=>e.json())).then((e=>{if(!e.poster_path)return;const t=i(e);l.innerHTML=t}))}(t))}e.addEventListener("click",p),u.addEventListener("click",p),s.addEventListener("click",(function(e){e.target===e.currentTarget&&s.classList.toggle("backdrop__is-hidden")}));
//# sourceMappingURL=index.be7fff78.js.map
