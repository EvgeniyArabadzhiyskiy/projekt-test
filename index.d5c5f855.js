!function(){var e=document.querySelector(".gallery__box"),t=document.querySelector('[data-action="prev"]'),n=document.querySelector('[data-action="next"]'),a=document.querySelector('[data-action="current"]'),r=document.querySelector(".search__form");function c(e){var t=e.imageSrc,n=e.title,a=e.movieGenres,r=e.movieYear,c=e.id;return'\n    <li  class="gallery__card" >\n      <img id='.concat(c,"  src=").concat(t," alt=").concat(n,' data-modal="open">\n      <div class="title__wrapper">\n          <h3 class="card__title">').concat(n,'</h3>\n          <div class="wrapper__info">\n              <ul class="card__list">').concat(a,'</ul>\n              <p class="card__year"> | ').concat(r,"</p>\n          </div>  \n      </div>\n    </li>")}var i=1;function o(t){return fetch("https://api.themoviedb.org/3/movie/".concat(t,"?api_key=d8b0ad5d4fb786d62f1125fa68e28b99")).then((function(e){return e.json()})).then((function(t){if(t.poster_path){var n=function(e){var t=e.poster_path,n=e.title,a=e.genres,r=e.release_date,c=e.id,i=r.slice(0,4),o=a.slice();o.splice(2),a.length>2&&o.push({name:"Others"});var d=o.map((function(e){return'<li class="card__genre">'.concat(e.name," "," ","</li>")}));return{id:c,imageSrc:"https://image.tmdb.org/t/p/w500".concat(t),movieGenres:d,title:n,movieYear:i}}(t),a=c(n);e.insertAdjacentHTML("beforeend",a)}}))}a.textContent=1;var d=function(e){fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=d8b0ad5d4fb786d62f1125fa68e28b99&page=".concat(e)).then((function(e){return e.json()})).then((function(e){e.results.map((function(e){return e.id})).map(o)}))};d(1);r.addEventListener("submit",(function(t){t.preventDefault();var n=t.target.elements.query;e.innerHTML="",a=n.value,fetch("https://api.themoviedb.org/3/search/movie?api_key=d8b0ad5d4fb786d62f1125fa68e28b99&query=".concat(a,"&page=").concat(r)).then((function(e){return e.json()})).then((function(e){e.results.map((function(e){return e.id})).map(o)}));var a,r})),n.addEventListener("click",(function(t){e.innerHTML="",d(i+=1),a.textContent=i})),t.addEventListener("click",(function(t){if(1===i)return;e.innerHTML="",d(i-=1),a.textContent=i}));var s=document.querySelector(".bacdrop"),u=document.querySelector(".modal__window"),l=document.querySelector(".modal__close");function f(e){var t;e.target.dataset.modal&&(s.classList.toggle("backdrop__is-hidden"),(t=e.target.id)&&function(e){fetch("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=d8b0ad5d4fb786d62f1125fa68e28b99")).then((function(e){return e.json()})).then((function(e){if(e.poster_path){var t=c(e);u.innerHTML=t}}))}(t))}e.addEventListener("click",f),l.addEventListener("click",f),s.addEventListener("click",(function(e){e.target===e.currentTarget&&s.classList.toggle("backdrop__is-hidden")}))}();
//# sourceMappingURL=index.d5c5f855.js.map
