{"mappings":"AAAA,MAAMA,EAAaC,SAASC,cAAc,iBACpCC,EAAUF,SAASC,cAAc,wBACjCE,EAAUH,SAASC,cAAc,wBACjCG,EAAaJ,SAASC,cAAc,2BACpCI,EAAaL,SAASC,cAAc,iBAK1C,SAASK,GAAmBC,SAAEA,EAAQC,MAAEA,EAAKC,YAAEA,EAAWC,UAAEA,EAASC,GAAEA,IACnE,MAAO,qDAEKA,UAAWJ,SAAgBC,+FAEPA,uFAEGC,kDACEC,qDAsDzC,IAAIE,EAAO,EAGX,SAASC,EAAmBF,GAC1B,OAAOG,MACL,sCAAsCH,8CAErCI,MAAKC,GAAOA,EAAIC,SAChBF,MAAKG,IAGJ,IAAKA,EAAKC,YACR,OAGF,MAAMC,EA9DZ,UAAuBD,YAAEA,EAAWX,MAAEA,EAAKa,OAAEA,EAAMC,aAAEA,EAAYX,GAAEA,IAEjE,MAAMD,EAAYY,EAAaC,MAAM,EAAG,GAElCC,EAAgBH,EAAOE,QAwB7B,OAvBAC,EAAcC,OAAO,GAEjBJ,EAAOK,OAAS,GAClBF,EAAcG,KAAK,CAAEC,KAAM,WAWX,IAChBjB,WALe,kCAAkCQ,gBAJ/BK,EAAcK,KAChCC,GAAS,2BAA2BA,EAAMF,sBAW1CpB,YACAE,GAsCqBqB,CAAcb,GAE3Bc,EAAS1B,EAAmBc,GAElCrB,EAAWkC,mBAAmB,YAAaD,MAlBjD5B,EAAW8B,YAAc,EAsBzB,MAAMC,EAAeC,IACnBtB,MACE,iGAAiGsB,KAEhGrB,MAAKC,GAAOA,EAAIC,SAChBF,MAAKG,IACWA,EAAKmB,QAAQR,KAAIS,GAAQA,EAAK3B,KAEtCkB,IAAIhB,OAIjBsB,EAAa,GAcb9B,EAAWkC,iBAAiB,UAE5B,SAA4BC,GAC1BA,EAAIC,iBACJ,MAAMC,EAAcF,EAAIG,OAAOC,SAASC,MAExC9C,EAAW+C,UAAY,GAlBJC,EAmBPL,EAAYM,MAlBxBlC,MACE,4FAA4FiC,UAAaE,KAExGlC,MAAKC,GAAOA,EAAIC,SAChBF,MAAKG,IACWA,EAAKmB,QAAQR,KAAIS,GAAQA,EAAK3B,KAEtCkB,IAAIhB,MARG,IAACkC,EAAME,KAsB3B9C,EAAQoC,iBAAiB,SAGzB,SAAwBW,GACtBnD,EAAW+C,UAAY,GAEvBlC,GAAQ,EACRuB,EAAavB,GACbR,EAAW8B,YAActB,KAP3BV,EAAQqC,iBAAiB,SAUzB,SAAwBW,GACtB,GAAa,IAATtC,EACF,OAGFb,EAAW+C,UAAY,GACvBlC,GAAQ,EACRuB,EAAavB,GACbR,EAAW8B,YAActB,KAM3B,MAAMuC,EAAWnD,SAASC,cAAc,YAClCmD,EAAcpD,SAASC,cAAc,kBACrCoD,EAAgBrD,SAASC,cAAc,iBAM7C,SAASqD,EAAYd,GAkCrB,IAAuB7B,EAjCjB6B,EAAIG,OAAOY,QAAQC,QACrBL,EAASM,UAAUC,OAAO,wBAgCP/C,EA/BL6B,EAAIG,OAAOhC,KAY7B,SAAwBA,GACbG,MACL,sCAAsCH,8CAErCI,MAAKC,GAAOA,EAAIC,SAChBF,MAAKG,IAGJ,IAAKA,EAAKC,YACR,OAGF,MAAMa,EAAS1B,EAAmBY,GAGlCkC,EAAYN,UAAYd,KAM5B2B,CAAehD,IAxCnBZ,EAAWwC,iBAAiB,QAASe,GACrCD,EAAcd,iBAAiB,QAASe,GACxCH,EAASZ,iBAAiB,SAS1B,SAA4BC,GACtBA,EAAIG,SAAWH,EAAIoB,eACrBT,EAASM,UAAUC,OAAO","sources":["src/js/searchFilms.js"],"sourcesContent":["const galleryBox = document.querySelector('.gallery__box');\nconst btnPrev = document.querySelector('[data-action=\"prev\"]');\nconst btnNext = document.querySelector('[data-action=\"next\"]');\nconst btnCurrent = document.querySelector('[data-action=\"current\"]');\nconst searchForm = document.querySelector('.search__form');\n// const galleryCard = document.querySelector('.search__form');\n\n\n\nfunction makeMarkupFilmCard({ imageSrc, title, movieGenres, movieYear, id }) {\n    return `\n    <li  class=\"gallery__card\" >\n      <img id=${id}  src=${imageSrc} alt=${title} data-modal=\"open\">\n      <div class=\"title__wrapper\">\n          <h3 class=\"card__title\">${title}</h3>\n          <div class=\"wrapper__info\">\n              <ul class=\"card__list\">${movieGenres}</ul>\n              <p class=\"card__year\"> | ${movieYear}</p>\n          </div>  \n      </div>\n    </li>`;\n}\n\n\nfunction makeDataMovie({ poster_path, title, genres, release_date, id }) {\n  \n  const movieYear = release_date.slice(0, 4);\n\n  const filtredGanres = genres.slice();\n  filtredGanres.splice(2);\n\n  if (genres.length > 2) {\n    filtredGanres.push({ name: 'Others' });\n  }\n\n  const movieGenres = filtredGanres.map(\n    genre => `<li class=\"card__genre\">${genre.name} ${' '}</li>`\n  );\n\n  const imageSrc = `https://image.tmdb.org/t/p/w500${poster_path}`;\n\n\n\n  const dataMovie = {\n    id,\n    imageSrc,\n    movieGenres,\n    title,\n    movieYear\n\n  }\n\n  return dataMovie\n\n\n}\n\n// const data = makeMarkupFilmCard\n\n\n// ${genres.map(genre => {\n//     return `<p class=\"card__genre\">${genre.name}</p>`\n// } ).join(' ')}\n\n// function makeMarkupFilmCards(results) {\n//     return results.map(({poster_path}) => {\n//         const imageSrc = `https://image.tmdb.org/t/p/w500${poster_path}`\n//         return `<li class=\"gallery__items\"><img  src=${imageSrc} alt=\"\" width=\"200\"></li>`\n//     }).join(' ')\n\n// }\nlet page = 1;\nbtnCurrent.textContent = 1;\n\nfunction createFIlmCardById(id) {\n  return fetch(\n    `https://api.themoviedb.org/3/movie/${id}?api_key=d8b0ad5d4fb786d62f1125fa68e28b99`\n  )\n    .then(res => res.json())\n    .then(data => {\n      // console.log('data', data);\n\n      if (!data.poster_path) {\n        return;\n      }\n      \n      const markupData = makeDataMovie(data);\n\n      const markup = makeMarkupFilmCard(markupData)\n\n      galleryBox.insertAdjacentHTML('beforeend', markup);\n    });\n}\n\nconst popularFilms = page => {\n  fetch(\n    `https://api.themoviedb.org/3/trending/movie/day?api_key=d8b0ad5d4fb786d62f1125fa68e28b99&page=${page}`\n  )\n    .then(res => res.json())\n    .then(data => {\n      const filmId = data.results.map(film => film.id);\n\n      filmId.map(createFIlmCardById);\n    });\n};\n\npopularFilms(1);\n\nconst searchFilms = (text, page) => {\n  fetch(\n    `https://api.themoviedb.org/3/search/movie?api_key=d8b0ad5d4fb786d62f1125fa68e28b99&query=${text}&page=${page}`\n  )\n    .then(res => res.json())\n    .then(data => {\n      const filmId = data.results.map(film => film.id);\n\n      filmId.map(createFIlmCardById);\n    });\n};\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\n\nfunction onSearchFormSubmit(evt) {\n  evt.preventDefault();\n  const searchInput = evt.target.elements.query;\n\n  galleryBox.innerHTML = '';\n  searchFilms(searchInput.value);\n}\n\nbtnNext.addEventListener('click', onBtnNextClick);\nbtnPrev.addEventListener('click', onBtnPrevClick);\n\nfunction onBtnNextClick(params) {\n  galleryBox.innerHTML = '';\n\n  page += 1;\n  popularFilms(page);\n  btnCurrent.textContent = page;\n}\n\nfunction onBtnPrevClick(params) {\n  if (page === 1) {\n    return;\n  }\n\n  galleryBox.innerHTML = '';\n  page -= 1;\n  popularFilms(page);\n  btnCurrent.textContent = page;\n}\n\nexport default popularFilms;\n\n//  ------------Modal Window -------------------\nconst backDrop = document.querySelector('.bacdrop');\nconst modalWindow = document.querySelector('.modal__window');\nconst btnCloseModal = document.querySelector('.modal__close');\n\ngalleryBox.addEventListener('click', modalToggle);\nbtnCloseModal.addEventListener('click', modalToggle);\nbackDrop.addEventListener('click', backdropCloseModal);\n\nfunction modalToggle(evt) {\n  if (evt.target.dataset.modal) {\n    backDrop.classList.toggle('backdrop__is-hidden');\n    makeModalCard(evt.target.id);\n  }\n}\n\nfunction backdropCloseModal(evt) {\n  if (evt.target === evt.currentTarget) {\n    backDrop.classList.toggle('backdrop__is-hidden');\n  }\n}\n\n\n\nfunction superFunction2(id) {\n    return fetch(\n      `https://api.themoviedb.org/3/movie/${id}?api_key=d8b0ad5d4fb786d62f1125fa68e28b99`\n    )\n      .then(res => res.json())\n      .then(data => {\n        // console.log('data', data);\n  \n        if (!data.poster_path) {\n          return;\n        }\n  \n        const markup = makeMarkupFilmCard(data);\n        \n  \n        modalWindow.innerHTML = markup\n      });\n  }\n\nfunction makeModalCard(id) {\n  if (id) {\n    superFunction2(id)\n  }\n}\n"],"names":["$907277df0df11f52$var$galleryBox","document","querySelector","$907277df0df11f52$var$btnPrev","$907277df0df11f52$var$btnNext","$907277df0df11f52$var$btnCurrent","$907277df0df11f52$var$searchForm","$907277df0df11f52$var$makeMarkupFilmCard","imageSrc","title","movieGenres","movieYear","id","$907277df0df11f52$var$page","$907277df0df11f52$var$createFIlmCardById","fetch","then","res","json","data","poster_path","markupData","genres","release_date","slice","filtredGanres","splice","length","push","name","map","genre","$907277df0df11f52$var$makeDataMovie","markup","insertAdjacentHTML","textContent","$907277df0df11f52$var$popularFilms","page1","results","film","addEventListener","evt","preventDefault","searchInput","target","elements","query","innerHTML","text","value","page2","params","$907277df0df11f52$var$backDrop","$907277df0df11f52$var$modalWindow","$907277df0df11f52$var$btnCloseModal","$907277df0df11f52$var$modalToggle","dataset","modal","classList","toggle","$907277df0df11f52$var$superFunction2","currentTarget"],"version":3,"file":"index.be7fff78.js.map"}